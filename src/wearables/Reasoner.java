package wearables;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;

public class Reasoner {

	public static List<Product> prodList;
	public static List<Store> storeList;
	public static List<Availability> availabilityList;
	public static Database myDatabase;
	public static File xmlFile;
	
	public Reasoner(String fileName) {
		prodList = new ArrayList<>();
		storeList = new ArrayList<>();
		availabilityList = new ArrayList<>();
		xmlFile = new File(fileName + ".xml");
	}
	
	public void init() throws FileNotFoundException {
		
		JAXB_XMLParser xmlhandler = new JAXB_XMLParser();
		xmlFile = new File("Wearables.xml");
		FileInputStream readthatfile = new FileInputStream(xmlFile);
		
		myDatabase = xmlhandler.loadXML(readthatfile);
		
		prodList = myDatabase.getProducts();
		storeList = myDatabase.getStores();
		availabilityList = myDatabase.getAvailability();
	}
	
	public static void main(String args[]) throws FileNotFoundException {
		Reasoner reasoner = new Reasoner("Wearables");
		reasoner.init();
		
//		for(int i = 0; i < reasoner.prodList.size(); i++) {
//			System.out.println(reasoner.prodList.get(i));
//		}
//		
//		for(int i = 0; i < reasoner.storeList.size(); i++) {
//			System.out.println(reasoner.storeList.get(i));
//		}
//		
//		for(int i = 0; i < reasoner.availabilityList.size(); i++) {
//			System.out.println(reasoner.availabilityList.get(i));
//		}
		
		BigInteger prodId = prodList.get(0).getId();
		System.out.println("Product with id: " + prodId);
		System.out.println(myDatabase.getProdById(prodId));
		System.out.println("");
		
		BigInteger storeId = storeList.get(0).getId();
		System.out.println("Store with id: " + storeId);
		System.out.println(myDatabase.getStoreById(storeId));
		System.out.println("");
		
		System.out.println("Getting availability of product of id " + prodId + " in store with id " + storeId + ".");
		System.out.println(myDatabase.getProdStockInStore(prodId, storeId));
		System.out.println("");
		
		List<Store> avStores;
		System.out.println("Stores with product of id " + prodId);
		avStores = myDatabase.getStoresWithProd(prodId);
		for(int i = 0; i < avStores.size(); i++) {
			System.out.println(avStores.get(i));
		}
		
		List<Product> avProd;
		System.out.println("Getting products in store " + storeId);
		avProd = myDatabase.getStoreProducts(storeId);
		for(int i = 0; i < avProd.size(); i++) {
			System.out.println(avProd.get(i));
		}
		
		
	}
	
}
